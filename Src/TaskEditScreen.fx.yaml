TaskEditScreen As screen:
    Fill: =RGBA(240,239,228,1)

    TaskEditScreenTaskNameTextLabel As label:
        Height: =70
        Size: =21
        Text: ="タスク名"
        Width: =560
        Y: =105
        ZIndex: =3

    TaskEditScreenTaskDescriptionTextLabel As label:
        Height: =70
        Size: =21
        Text: ="詳細"
        Width: =560
        Y: =352
        ZIndex: =5

    TaskEditScreenTaskLimitTextLabel As label:
        Height: =70
        Size: =21
        Text: ="期日"
        Width: =560
        Y: =612
        ZIndex: =7

    TaskEditScreenTaskNameTextField As text:
        Default: =LookUp(B_TASK, B_TASK=task_id).TASKNAME
        Height: =70
        HintText: ="タスク名を入力"
        Size: =21
        Width: =560
        Y: =190
        ZIndex: =8

    TaskEditScreenTaskDescriptionTextField As text:
        Default: =LookUp(B_TASK, B_TASK=task_id).TASKDESCRIPTION
        Height: =70
        HintText: ="詳細を入力"
        Size: =21
        Width: =560
        Y: =470
        ZIndex: =9

    TaskEditScreenTaskDateDateField As datepicker:
        DefaultDate: =LookUp(B_TASK, B_TASK=task_id).DATE
        Height: =70
        Size: =24
        Width: =575
        Y: =728
        ZIndex: =10

    TaskEditScreenCheckbox As checkbox:
        Height: =85
        Size: =21
        Text: =
        Width: =280
        Y: =900
        ZIndex: =12

    TaskEditScreenFinishLabel As label:
        Height: =70
        Size: =21
        Text: ="終了"
        Width: =560
        Y: =830
        ZIndex: =13

    TaskEditScreenFinishTimeDateField As datepicker:
        DefaultDate: =LookUp(B_TASK, B_TASK=task_id).FINISHTIME
        Height: =70
        Size: =24
        Visible: =TaskEditScreenCheckbox.Value
        Width: =575
        Y: =1013
        ZIndex: =14

    TaskEditScreenBackIcon As icon.ArrowLeft:
        Icon: =Icon.ArrowLeft
        OnSelect: =Back(ScreenTransition.None);
        Y: =3
        ZIndex: =15

    TaskEditScreenSaveIcon As icon.Check:
        Icon: =Icon.Check
        OnSelect: |-
            =If(
                IsBlank(task_id),
                Set(
                    tmp_address,
                    Defaults(B_TASK)
                ),
                Set(
                    tmp_address,
                    LookUp(
                        B_TASK,
                        B_TASK = task_id
                    )
                )
            );
            If(
                TaskEditScreenCheckbox.Value,
                Patch(
                    B_TASK,
                    tmp_address,
                    {
                        USERID: user_id,
                        TASKNAME: TaskEditScreenTaskNameTextField.Text,
                        TASKDESCRIPTION: TaskEditScreenTaskDescriptionTextField.Text,
                        FLAG: 1,
                        DATE: TaskEditScreenTaskDateDateField.SelectedDate,
                        FINISHTIME: TaskEditScreenFinishTimeDateField.SelectedDate
                    }
                ),
                Patch(
                    B_TASK,
                    tmp_address,
                    {
                        USERID: user_id,
                        TASKNAME: TaskEditScreenTaskNameTextField.Text,
                        TASKDESCRIPTION: TaskEditScreenTaskDescriptionTextField.Text,
                        FLAG: 0,
                        DATE: TaskEditScreenTaskDateDateField.SelectedDate
                    }
                )
            );
            If(
                TaskEditScreenTaskNameTextField.Text = "404",
                Notify(
                    "称号-見つかりません！",
                    NotificationType.Success
                );
                Patch(
                    B_TROPHY,
                    LookUp(
                        B_TROPHY,
                        USERID = Text(user_id)
                    ),
                    {'404T': 1}
                )
            );
            Navigate(
                HomeScreen,
                ScreenTransition.None
            );
            Reset(TaskEditScreenTaskNameTextField);
            Reset(TaskEditScreenFinishTimeDateField);
            Reset(TaskEditScreenCheckbox);
            Reset(TaskEditScreenTaskDescriptionTextField)
        X: =576
        ZIndex: =16

